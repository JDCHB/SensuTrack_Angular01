<app-header></app-header>
<app-navbar2></app-navbar2>
<app-chatbot></app-chatbot>
<div class="container py-5" style="margin-top: 3%; margin-bottom: 3%;">
    <h2 class="mb-4 text-center text-primary fw-bold">Gestión de Usuarios</h2>

    <div *ngIf="loading" class="text-center my-5">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Cargando...</span>
        </div>
        <p class="mt-2">Cargando datos...</p>
    </div>

    <p *ngIf="error" class="alert alert-danger text-center">Error: {{ error }}</p>

    <div *ngIf="!loading && !error" class="table-responsive shadow rounded">
        <table class="table table-bordered table-hover align-middle">
            <thead class="table-primary text-center">
                <tr>
                    <th>Usuario</th>
                    <th>Nombre</th>
                    <th>Apellido</th>
                    <th>Documento</th>
                    <th>Teléfono</th>
                    <th>Estado</th>
                    <th>Opciones</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let todo of todos">
                    <td>{{ todo.email }}</td>
                    <td>{{ todo.nombre }}</td>
                    <td>{{ todo.apellido }}</td>
                    <td>{{ todo.documento }}</td>
                    <td>{{ todo.telefono }}</td>
                    <td class="text-center">
                        <span class="badge" [ngClass]="todo.estado ? 'bg-success' : 'bg-danger'">
                            {{ todo.estado ? 'Activo' : 'Inactivo' }}
                        </span>
                    </td>
                    <td class="text-center">
                        <div class="d-flex justify-content-center gap-2 flex-wrap">
                            <button class="btn btn-outline-primary btn-sm" (click)="editar(todo.id)">
                                <i class="bi bi-pencil-square"></i> Editar
                            </button>
                            <button *ngIf="todo.estado" class="btn btn-outline-danger btn-sm"
                                (click)="desactivar(todo.id)">
                                <i class="bi bi-lock"></i> Desactivar
                            </button>
                            <button *ngIf="!todo.estado" class="btn btn-outline-success btn-sm"
                                (click)="activar(todo.id)">
                                <i class="bi bi-unlock"></i> Activar
                            </button>
                        </div>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>




<app-footer></app-footer>